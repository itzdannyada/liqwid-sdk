import e,{useState as t,useCallback as r,useEffect as a}from"react";import n from"react-dom/client";const l=({addresses:n=[],currency:l="USD",apiUrl:i="https://v2.api.liqwid.finance/graphql",showHeader:c=!0})=>{const[s,d]=t(null),[o,m]=t(!1),[u,p]=t(null),[y,E]=t(""),[g,h]=t(l),w=r(async e=>{if(e&&0!==e.length){m(!0),p(null);try{const t=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json","x-project":"itzdanny-liqwid-yield-widget"},body:JSON.stringify({operationName:"GetYieldEarned",variables:{input:{addresses:e},currencyInput:{currency:g}},query:"query GetYieldEarned($input: YieldEarnedInput!, $currencyInput: InCurrencyInput) {\n            historical {\n              yieldEarned(input: $input) {\n                totalYieldEarned(input: $currencyInput)\n                markets {\n                  id\n                  amount\n                  amountInCurrency(input: $currencyInput)\n                  __typename\n                }\n                __typename\n              }\n              __typename\n            }\n          }"})});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const r=await t.json();if(r.errors)throw new Error(r.errors[0].message);d(r.data.historical.yieldEarned)}catch(e){p(e.message),console.error("Error fetching yield data:",e)}finally{m(!1)}}},[i,g]);a(()=>{n.length>0&&w(n)},[n,g,w]);const f=(e,t)=>{if(!e)return"0";return new Intl.NumberFormat("en-US",{style:"currency",currency:t,minimumFractionDigits:2,maximumFractionDigits:6}).format(e)};return e.createElement("div",{className:"liqwid-yield-widget",style:{backgroundImage:"url(4e13ed792f0c9603.avif), linear-gradient(135deg, #667eea 0%, #764ba2 100%)",backgroundSize:"cover, cover",backgroundPosition:"center, center",backgroundRepeat:"no-repeat, no-repeat"}},c&&e.createElement("div",{className:"widget-header"},e.createElement("img",{src:"1f17b419382834f8.png",alt:"Liqwid Finance",className:"powered-by-logo",width:160,height:60}),e.createElement("div",{className:"header-controls"},e.createElement("select",{value:g,onChange:e=>h(e.target.value),className:"currency-select"},e.createElement("option",{value:"GBP"},"GBP (£)"),e.createElement("option",{value:"USD"},"USD ($)"),e.createElement("option",{value:"EUR"},"EUR (€)")))),0===n.length&&e.createElement("form",{onSubmit:e=>{e.preventDefault(),y.trim()&&w([y.trim()])},className:"address-form"},e.createElement("div",{className:"input-group"},e.createElement("input",{type:"text",placeholder:"Enter Cardano address...",value:y,onChange:e=>E(e.target.value),className:"address-input"}),e.createElement("button",{type:"submit",disabled:o,className:"submit-button"},o?"Loading...":"Check Yield"))),o&&e.createElement("div",{className:"loading-container"},e.createElement("div",{className:"spinner"}),e.createElement("p",null,"Fetching yield data...")),u&&e.createElement("div",{className:"error-container"},e.createElement("p",{className:"error-message"},"Error: ",u)),s&&!o&&e.createElement("div",{className:"yield-results"},e.createElement("div",{className:"total-yield"},e.createElement("h4",null,"Total Yield Earned"),e.createElement("div",{className:"yield-amount"},f(s.totalYieldEarned,g))),s.markets&&s.markets.length>0&&e.createElement("div",{className:"markets-breakdown"},e.createElement("h5",null,"Market Breakdown"),e.createElement("div",{className:"markets-list"},s.markets.map((t,r)=>e.createElement("div",{key:t.id||r,className:"market-item"},e.createElement("span",{className:"market-id"},t.id),e.createElement("span",{className:"market-amount"},f(t.amountInCurrency,g))))))),e.createElement("div",{className:"widget-footer"},e.createElement("a",{href:"https://x.com/itzdannyada",target:"_blank",rel:"noopener noreferrer",className:"powered-by"},"Built by $itzdanny")))};"undefined"!=typeof window&&(window.LiqwidYieldWidget={render:(t,r={})=>{const a=document.getElementById(t);if(a){const t=n.createRoot(a);return t.render(e.createElement(l,r)),t}console.error(`Element with id "${t}" not found`)},create:(e={})=>{const{elementId:t,addresses:r=[],currency:a="GBP",showHeader:n=!0,...l}=e;if(t)return window.LiqwidYieldWidget.render(t,{addresses:r,currency:a,showHeader:n,...l});console.error("elementId is required")}});export{l as YieldWidget,l as default};
//# sourceMappingURL=index.esm.js.map
