{"version":3,"file":"index.esm.js","sources":["../src/widget/YieldWidget.js","../src/widget/logowithtext.png","../src/widget/index.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\r\nimport './YieldWidget.css';\r\nimport bgImage from './bg.avif';\r\nimport logoImage from './logowithtext.png';\r\n\r\nconst YieldWidget = ({ \r\n  addresses = [], \r\n  currency = 'USD', \r\n  apiUrl = 'https://v2.api.liqwid.finance/graphql',\r\n  showHeader = true\r\n}) => {\r\n  const [yieldData, setYieldData] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [inputAddress, setInputAddress] = useState('');\r\n  const [selectedCurrency, setSelectedCurrency] = useState(currency);\r\n\r\n  const fetchYieldData = useCallback(async (addressList) => {\r\n    if (!addressList || addressList.length === 0) return;\r\n\r\n    setLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      const response = await fetch(apiUrl, {\r\n        method: 'POST',\r\n        headers: {\r\n            'Content-Type': 'application/json',\r\n            \"x-project\": \"itzdanny-liqwid-yield-widget\"\r\n        },\r\n        body: JSON.stringify({\r\n          operationName: 'GetYieldEarned',\r\n          variables: {\r\n            input: {\r\n              addresses: addressList\r\n            },\r\n            currencyInput: {\r\n              currency: selectedCurrency\r\n            }\r\n          },\r\n          query: `query GetYieldEarned($input: YieldEarnedInput!, $currencyInput: InCurrencyInput) {\r\n            historical {\r\n              yieldEarned(input: $input) {\r\n                totalYieldEarned(input: $currencyInput)\r\n                markets {\r\n                  id\r\n                  amount\r\n                  amountInCurrency(input: $currencyInput)\r\n                  __typename\r\n                }\r\n                __typename\r\n              }\r\n              __typename\r\n            }\r\n          }`\r\n        }),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error(`HTTP error! status: ${response.status}`);\r\n      }\r\n\r\n      const data = await response.json();\r\n      \r\n      if (data.errors) {\r\n        throw new Error(data.errors[0].message);\r\n      }\r\n\r\n      setYieldData(data.data.historical.yieldEarned);\r\n    } catch (err) {\r\n      setError(err.message);\r\n      console.error('Error fetching yield data:', err);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [apiUrl, selectedCurrency]);\r\n\r\n  useEffect(() => {\r\n    if (addresses.length > 0) {\r\n      fetchYieldData(addresses);\r\n    }\r\n  }, [addresses, selectedCurrency, fetchYieldData]);\r\n\r\n  const handleAddressSubmit = (e) => {\r\n    e.preventDefault();\r\n    if (inputAddress.trim()) {\r\n      fetchYieldData([inputAddress.trim()]);\r\n    }\r\n  };\r\n\r\n  const formatCurrency = (amount, currency) => {\r\n    if (!amount) return '0';\r\n    \r\n    const formatter = new Intl.NumberFormat('en-US', {\r\n      style: 'currency',\r\n      currency: currency,\r\n      minimumFractionDigits: 2,\r\n      maximumFractionDigits: 6\r\n    });\r\n    \r\n    return formatter.format(amount);\r\n  };\r\n\r\n  return (\r\n    <div \r\n      className=\"liqwid-yield-widget\"\r\n      style={{ \r\n        backgroundImage: `url(${bgImage}), linear-gradient(135deg, #667eea 0%, #764ba2 100%)`,\r\n        backgroundSize: 'cover, cover',\r\n        backgroundPosition: 'center, center',\r\n        backgroundRepeat: 'no-repeat, no-repeat'\r\n      }}\r\n    >\r\n      {showHeader && (\r\n        <div className=\"widget-header\">\r\n          <img src={logoImage} alt=\"Liqwid Finance\" className=\"powered-by-logo\" width={160} height={60}/>\r\n          <div className=\"header-controls\">\r\n            <select \r\n              value={selectedCurrency} \r\n              onChange={(e) => setSelectedCurrency(e.target.value)}\r\n              className=\"currency-select\"\r\n            >\r\n              <option value=\"GBP\">GBP (£)</option>\r\n              <option value=\"USD\">USD ($)</option>\r\n              <option value=\"EUR\">EUR (€)</option>\r\n            </select>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {addresses.length === 0 && (\r\n        <form onSubmit={handleAddressSubmit} className=\"address-form\">\r\n          <div className=\"input-group\">\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Enter Cardano address...\"\r\n              value={inputAddress}\r\n              onChange={(e) => setInputAddress(e.target.value)}\r\n              className=\"address-input\"\r\n            />\r\n            <button type=\"submit\" disabled={loading} className=\"submit-button\">\r\n              {loading ? 'Loading...' : 'Check Yield'}\r\n            </button>\r\n          </div>\r\n        </form>\r\n      )}\r\n\r\n      {loading && (\r\n        <div className=\"loading-container\">\r\n          <div className=\"spinner\"></div>\r\n          <p>Fetching yield data...</p>\r\n        </div>\r\n      )}\r\n\r\n      {error && (\r\n        <div className=\"error-container\">\r\n          <p className=\"error-message\">Error: {error}</p>\r\n        </div>\r\n      )}\r\n\r\n      {yieldData && !loading && (\r\n        <div className=\"yield-results\">\r\n          <div className=\"total-yield\">\r\n            <h4>Total Yield Earned</h4>\r\n            <div className=\"yield-amount\">\r\n              {formatCurrency(yieldData.totalYieldEarned, selectedCurrency)}\r\n            </div>\r\n          </div>\r\n\r\n          {yieldData.markets && yieldData.markets.length > 0 && (\r\n            <div className=\"markets-breakdown\">\r\n              <h5>Market Breakdown</h5>\r\n              <div className=\"markets-list\">\r\n                {yieldData.markets.map((market, index) => (\r\n                  <div key={market.id || index} className=\"market-item\">\r\n                    <span className=\"market-id\">{market.id}</span>\r\n                    <span className=\"market-amount\">\r\n                      {formatCurrency(market.amountInCurrency, selectedCurrency)}\r\n                    </span>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"widget-footer\">\r\n        <a \r\n          href=\"https://x.com/itzdannyada\" \r\n          target=\"_blank\" \r\n          rel=\"noopener noreferrer\"\r\n          className=\"powered-by\"\r\n        >\r\n          Built by $itzdanny\r\n        </a>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default YieldWidget;","export default \"1f17b419382834f8.png\"","import React from 'react';\r\nimport ReactDOM from 'react-dom/client';\r\nimport YieldWidget from './YieldWidget';\r\n\r\n// Named export for direct import\r\nexport { YieldWidget };\r\n\r\n// Default export\r\nexport default YieldWidget;\r\n\r\n// Global function for embedding via script tag\r\nif (typeof window !== 'undefined') {\r\n  window.LiqwidYieldWidget = {\r\n    render: (elementId, props = {}) => {\r\n      const element = document.getElementById(elementId);\r\n      if (element) {\r\n        const root = ReactDOM.createRoot(element);\r\n        root.render(React.createElement(YieldWidget, props));\r\n        return root;\r\n      } else {\r\n        console.error(`Element with id \"${elementId}\" not found`);\r\n      }\r\n    },\r\n    \r\n    // Helper function to create widget with minimal config\r\n    create: (config = {}) => {\r\n      const {\r\n        elementId,\r\n        addresses = [],\r\n        currency = 'GBP',\r\n        showHeader = true,\r\n        ...otherProps\r\n      } = config;\r\n      \r\n      if (!elementId) {\r\n        console.error('elementId is required');\r\n        return;\r\n      }\r\n      \r\n      return window.LiqwidYieldWidget.render(elementId, {\r\n        addresses,\r\n        currency,\r\n        showHeader,\r\n        ...otherProps\r\n      });\r\n    }\r\n  };\r\n}"],"names":["YieldWidget","addresses","currency","apiUrl","showHeader","yieldData","setYieldData","useState","loading","setLoading","error","setError","inputAddress","setInputAddress","selectedCurrency","setSelectedCurrency","fetchYieldData","useCallback","async","addressList","length","response","fetch","method","headers","body","JSON","stringify","operationName","variables","input","currencyInput","query","ok","Error","status","data","json","errors","message","historical","yieldEarned","err","console","useEffect","formatCurrency","amount","Intl","NumberFormat","style","minimumFractionDigits","maximumFractionDigits","format","React","createElement","className","backgroundImage","backgroundSize","backgroundPosition","backgroundRepeat","src","alt","width","height","value","onChange","e","target","onSubmit","preventDefault","trim","type","placeholder","disabled","totalYieldEarned","markets","map","market","index","key","id","amountInCurrency","href","rel","window","LiqwidYieldWidget","render","elementId","props","element","document","getElementById","root","ReactDOM","createRoot","create","config","otherProps"],"mappings":"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"}