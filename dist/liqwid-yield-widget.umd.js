!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react"),require("react-dom/client")):"function"==typeof define&&define.amd?define(["exports","react","react-dom/client"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).LiqwidYieldWidget={},e.React,e.ReactDOM)}(this,function(e,t,a){"use strict";const n=({addresses:e=[],currency:a="USD",apiUrl:n="https://v2.api.liqwid.finance/graphql",showHeader:r=!0})=>{const[i,l]=t.useState(null),[s,c]=t.useState(!1),[d,o]=t.useState(null),[m,u]=t.useState(""),[p,y]=t.useState(a),E=t.useCallback(async e=>{if(e&&0!==e.length){c(!0),o(null);try{const t=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json","x-project":"itzdanny-liqwid-yield-widget"},body:JSON.stringify({operationName:"GetYieldEarned",variables:{input:{addresses:e},currencyInput:{currency:p}},query:"query GetYieldEarned($input: YieldEarnedInput!, $currencyInput: InCurrencyInput) {\n            historical {\n              yieldEarned(input: $input) {\n                totalYieldEarned(input: $currencyInput)\n                markets {\n                  id\n                  amount\n                  amountInCurrency(input: $currencyInput)\n                  __typename\n                }\n                __typename\n              }\n              __typename\n            }\n          }"})});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const a=await t.json();if(a.errors)throw new Error(a.errors[0].message);l(a.data.historical.yieldEarned)}catch(e){o(e.message),console.error("Error fetching yield data:",e)}finally{c(!1)}}},[n,p]);t.useEffect(()=>{e.length>0&&E(e)},[e,p,E]);const g=(e,t)=>{if(!e)return"0";return new Intl.NumberFormat("en-US",{style:"currency",currency:t,minimumFractionDigits:2,maximumFractionDigits:6}).format(e)};return t.createElement("div",{className:"liqwid-yield-widget",style:{backgroundImage:"url(4e13ed792f0c9603.avif), linear-gradient(135deg, #667eea 0%, #764ba2 100%)",backgroundSize:"cover, cover",backgroundPosition:"center, center",backgroundRepeat:"no-repeat, no-repeat"}},r&&t.createElement("div",{className:"widget-header"},t.createElement("img",{src:"1f17b419382834f8.png",alt:"Liqwid Finance",className:"powered-by-logo",width:160,height:60}),t.createElement("div",{className:"header-controls"},t.createElement("select",{value:p,onChange:e=>y(e.target.value),className:"currency-select"},t.createElement("option",{value:"GBP"},"GBP (£)"),t.createElement("option",{value:"USD"},"USD ($)"),t.createElement("option",{value:"EUR"},"EUR (€)")))),0===e.length&&t.createElement("form",{onSubmit:e=>{e.preventDefault(),m.trim()&&E([m.trim()])},className:"address-form"},t.createElement("div",{className:"input-group"},t.createElement("input",{type:"text",placeholder:"Enter Cardano address...",value:m,onChange:e=>u(e.target.value),className:"address-input"}),t.createElement("button",{type:"submit",disabled:s,className:"submit-button"},s?"Loading...":"Check Yield"))),s&&t.createElement("div",{className:"loading-container"},t.createElement("div",{className:"spinner"}),t.createElement("p",null,"Fetching yield data...")),d&&t.createElement("div",{className:"error-container"},t.createElement("p",{className:"error-message"},"Error: ",d)),i&&!s&&t.createElement("div",{className:"yield-results"},t.createElement("div",{className:"total-yield"},t.createElement("h4",null,"Total Yield Earned"),t.createElement("div",{className:"yield-amount"},g(i.totalYieldEarned,p))),i.markets&&i.markets.length>0&&t.createElement("div",{className:"markets-breakdown"},t.createElement("h5",null,"Market Breakdown"),t.createElement("div",{className:"markets-list"},i.markets.map((e,a)=>t.createElement("div",{key:e.id||a,className:"market-item"},t.createElement("span",{className:"market-id"},e.id),t.createElement("span",{className:"market-amount"},g(e.amountInCurrency,p))))))),t.createElement("div",{className:"widget-footer"},t.createElement("a",{href:"https://x.com/itzdannyada",target:"_blank",rel:"noopener noreferrer",className:"powered-by"},"Built by $itzdanny")))};"undefined"!=typeof window&&(window.LiqwidYieldWidget={render:(e,r={})=>{const i=document.getElementById(e);if(i){const e=a.createRoot(i);return e.render(t.createElement(n,r)),e}console.error(`Element with id "${e}" not found`)},create:(e={})=>{const{elementId:t,addresses:a=[],currency:n="GBP",showHeader:r=!0,...i}=e;if(t)return window.LiqwidYieldWidget.render(t,{addresses:a,currency:n,showHeader:r,...i});console.error("elementId is required")}}),e.YieldWidget=n,e.default=n,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=liqwid-yield-widget.umd.js.map
