"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),t=require("react-dom/client");const r=({addresses:t=[],currency:r="USD",apiUrl:a="https://v2.api.liqwid.finance/graphql",showHeader:n=!0})=>{const[l,i]=e.useState(null),[s,c]=e.useState(!1),[d,o]=e.useState(null),[m,u]=e.useState(""),[p,y]=e.useState(r),E=e.useCallback(async e=>{if(e&&0!==e.length){c(!0),o(null);try{const t=await fetch(a,{method:"POST",headers:{"Content-Type":"application/json","x-project":"itzdanny-liqwid-yield-widget"},body:JSON.stringify({operationName:"GetYieldEarned",variables:{input:{addresses:e},currencyInput:{currency:p}},query:"query GetYieldEarned($input: YieldEarnedInput!, $currencyInput: InCurrencyInput) {\n            historical {\n              yieldEarned(input: $input) {\n                totalYieldEarned(input: $currencyInput)\n                markets {\n                  id\n                  amount\n                  amountInCurrency(input: $currencyInput)\n                  __typename\n                }\n                __typename\n              }\n              __typename\n            }\n          }"})});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const r=await t.json();if(r.errors)throw new Error(r.errors[0].message);i(r.data.historical.yieldEarned)}catch(e){o(e.message),console.error("Error fetching yield data:",e)}finally{c(!1)}}},[a,p]);e.useEffect(()=>{t.length>0&&E(t)},[t,p,E]);const g=(e,t)=>{if(!e)return"0";return new Intl.NumberFormat("en-US",{style:"currency",currency:t,minimumFractionDigits:2,maximumFractionDigits:6}).format(e)};return e.createElement("div",{className:"liqwid-yield-widget",style:{backgroundImage:"url(4e13ed792f0c9603.avif), linear-gradient(135deg, #667eea 0%, #764ba2 100%)",backgroundSize:"cover, cover",backgroundPosition:"center, center",backgroundRepeat:"no-repeat, no-repeat"}},n&&e.createElement("div",{className:"widget-header"},e.createElement("img",{src:"1f17b419382834f8.png",alt:"Liqwid Finance",className:"powered-by-logo",width:160,height:60}),e.createElement("div",{className:"header-controls"},e.createElement("select",{value:p,onChange:e=>y(e.target.value),className:"currency-select"},e.createElement("option",{value:"GBP"},"GBP (£)"),e.createElement("option",{value:"USD"},"USD ($)"),e.createElement("option",{value:"EUR"},"EUR (€)")))),0===t.length&&e.createElement("form",{onSubmit:e=>{e.preventDefault(),m.trim()&&E([m.trim()])},className:"address-form"},e.createElement("div",{className:"input-group"},e.createElement("input",{type:"text",placeholder:"Enter Cardano address...",value:m,onChange:e=>u(e.target.value),className:"address-input"}),e.createElement("button",{type:"submit",disabled:s,className:"submit-button"},s?"Loading...":"Check Yield"))),s&&e.createElement("div",{className:"loading-container"},e.createElement("div",{className:"spinner"}),e.createElement("p",null,"Fetching yield data...")),d&&e.createElement("div",{className:"error-container"},e.createElement("p",{className:"error-message"},"Error: ",d)),l&&!s&&e.createElement("div",{className:"yield-results"},e.createElement("div",{className:"total-yield"},e.createElement("h4",null,"Total Yield Earned"),e.createElement("div",{className:"yield-amount"},g(l.totalYieldEarned,p))),l.markets&&l.markets.length>0&&e.createElement("div",{className:"markets-breakdown"},e.createElement("h5",null,"Market Breakdown"),e.createElement("div",{className:"markets-list"},l.markets.map((t,r)=>e.createElement("div",{key:t.id||r,className:"market-item"},e.createElement("span",{className:"market-id"},t.id),e.createElement("span",{className:"market-amount"},g(t.amountInCurrency,p))))))),e.createElement("div",{className:"widget-footer"},e.createElement("a",{href:"https://x.com/itzdannyada",target:"_blank",rel:"noopener noreferrer",className:"powered-by"},"Built by $itzdanny")))};"undefined"!=typeof window&&(window.LiqwidYieldWidget={render:(a,n={})=>{const l=document.getElementById(a);if(l){const a=t.createRoot(l);return a.render(e.createElement(r,n)),a}console.error(`Element with id "${a}" not found`)},create:(e={})=>{const{elementId:t,addresses:r=[],currency:a="GBP",showHeader:n=!0,...l}=e;if(t)return window.LiqwidYieldWidget.render(t,{addresses:r,currency:a,showHeader:n,...l});console.error("elementId is required")}}),exports.YieldWidget=r,exports.default=r;
//# sourceMappingURL=index.js.map
